<% layout("/layouts/boilerplate") -%>

<div id="filters">
  <div class="filter">
    <a href="/listings?filter=trending">
      <i class="fa fa-fire" aria-hidden="true"></i>
      <p>Trending</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=rooms">
      <i class="fa fa-bed" aria-hidden="true"></i>
      <p>Rooms</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=adventurous">
      <i class="fa fa-hiking" aria-hidden="true"></i>
      <p>Adventurous</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=castle">
      <i class="fa fa-chess-rook" aria-hidden="true"></i>
      <p>Castle</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=wild">
      <i class="fa fa-paw" aria-hidden="true"></i>
      <p>Wild</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=camping">
      <i class="fa fa-campground" aria-hidden="true"></i>
      <p>Camping</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=farms">
      <i class="fa fa-seedling" aria-hidden="true"></i>
      <p>Farms</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=arctic">
      <i class="fa fa-mountain" aria-hidden="true"></i>
      <p>Arctic</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=desert">
      <i class="fa fa-sun" aria-hidden="true"></i>
      <p>Desert</p>
    </a>
  </div>
  <div class="filter">
    <a href="/listings?filter=beach">
      <i class="fa fa-umbrella-beach" aria-hidden="true"></i>
      <p>Beach</p>
    </a>
  </div>
 

  <div class="tax-toggle">
    <div class="form-check-reverse form-switch">
      <input 
        class="form-check-input" 
        type="checkbox" 
        role="switch" 
        id="flexSwitchCheckDefault"
      />
      <label 
        class="form-check-label" 
        for="flexSwitchCheckDefault"
        >Display Total After Taxes
      </label>
    </div>
  </div>

</div> 




  <div id="filterCarousel" class="carousel slide d-md-none" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="row text-center">

                <div class="col-3 filter">
                    <a href="/listings?filter=trending">
                        <i class="fa fa-fire" aria-hidden="true"></i>
                        <p>Trending</p>
                    </a>
                </div>

                <div class="col-3 filter">
                    <a href="/listings?filter=rooms">
                        <i class="fa fa-bed" aria-hidden="true"></i>
                        <p>Rooms</p>
                    </a>
                </div>

                <div class="col-3 filter">
                  <a href="/listings?filter=adventurous">
                       <i class="fa fa-hiking" aria-hidden="true"></i>
                       <p>Adventurous</p>
                  </a>
                </div>
            </div>
        </div>


        <div class="carousel-item">
            <div class="row text-center">

                <div class="col-3 filter">
                  <a href="/listings?filter=castle">
                    <i class="fa fa-chess-rook" aria-hidden="true"></i>
                    <p>Castle</p>
                  </a>
                </div>

                <div class="col-3 filter">
                  <a href="/listings?filter=wild">
                    <i class="fa fa-paw" aria-hidden="true"></i>
                    <p>Wild</p>
                  </a>
                </div>

                <div class="col-3 filter">
                  <a href="/listings?filter=camping">
                    <i class="fa fa-campground" aria-hidden="true"></i>
                    <p>Camping</p>
                  </a>
                </div>

            </div>
        </div>

        
        <div class="carousel-item">
          <div class="row text-center">

            <div class="col-3 filter">
              <a href="/listings?filter=arctic">
                  <i class="fa fa-mountain" aria-hidden="true"></i>
                  <p>Arctic</p>
              </a>
            </div>

            <div class="col-3 filter">
              <a href="/listings?filter=farms">
                  <i class="fa fa-tractor" aria-hidden="true"></i>
                  <p>Farms</p>
              </a>
            </div>

            <div class="col-3 filter">
              <a href="/listings?filter=arctic">
                <i class="fa fa-mountain" aria-hidden="true"></i>
                <p>Arctic</p>
              </a>
            </div>

          </div>
        </div>    


        <div class="carousel-item">
          <div class="row text-center">

          <div class="col-3 filter">
            <a href="/listings?filter=desert">
              <i class="fa fa-sun" aria-hidden="true"></i>
              <p>Desert</p>
            </a>
          </div>

          <div class="col-3 filter">
            <a href="/listings?filter=beach">
              <i class="fa fa-umbrella-beach" aria-hidden="true"></i>
              <p>Beach</p>
            </a>
          </div>

      </div>
    </div>  

  </div>

    <!-- Carousel Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#filterCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#filterCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>



  

 

<% if (noListingsMessage) { %>
  <div class="alert alert-warning"><%= noListingsMessage %></div>
<% } %>

    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
        <% for(let listing of allListings) { %>
          <a href="/listings/<%= listing._id %>" class="listing-link">
            <div class="card listing-card col">
                <img 
                src="<%= listing.image.url %>" 
                class="card-img-top" 
                alt="listing_image" 
                style="height: 20rem;"
                />

              <div class="card-img-overlay"></div>

                <div class="card-body">
                  <p class="card-text">
                    <b><%= listing.title %></b> <br>
                    &#8377;<%= listing.price.toLocaleString("en-IN") %> / night
                    <i class="tax-info">&nbsp; &nbsp;+18% GST</i>
                  </p>
                </div>
              </div>
            </a>
            <% } %> 
    </div>

 <script>
  let taxSwitch = document.getElementById("flexSwitchCheckDefault");
  taxSwitch.addEventListener("click", () => {
    let taxInfo = document.getElementsByClassName("tax-info");
    for(info of taxInfo) {
      if(info.style.display != "inline"){
        info.style.display = "inline";
      } else {
        info.style.display = "none";
      }
    }
  });

// navbar
  document.addEventListener('DOMContentLoaded', function() {
    var navbarToggler = document.querySelector('.navbar-toggler');
    var navbarCollapse = document.querySelector('.navbar-collapse');

    navbarToggler.addEventListener('click', function() {
      navbarCollapse.classList.toggle('show');
    });
  });

// **
  document.addEventListener('DOMContentLoaded', function() {
    var navbarToggler = document.querySelector('.navbar-toggler');

    navbarToggler.addEventListener('click', function() {
      // Toggle the "active" class on the button itself to show/hide the cross
      this.classList.toggle('active');
    });
  });


 </script>   

